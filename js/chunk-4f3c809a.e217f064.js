(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f3c809a"],{"270e":function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"billinginfo"},[a("Bannerimg",[a("ProgressStep",{attrs:{current:t.step}})],1),a("div",{staticClass:"container_fix"},[a("h3",[t._v(t._s(t.$t("Billinginfo.step_title")))]),a("div",{staticClass:"row mb-4"},[a("div",{staticClass:"col-12 col-md-5"},[a("ul",{staticClass:"order"},[t._l(t.carts.carts,(function(s){return a("li",{key:s.id,staticClass:"pb-3 orderList"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-3 p-0"},[a("div",{staticClass:"pro-img"},[a("img",{attrs:{src:s.product.imageUrl,alt:""}})])]),a("div",{staticClass:"col-7 p-0"},[a("div",{staticClass:"row m-0 w-100"},[a("div",{staticClass:"col-12 col-md-8"},[a("div",{staticClass:"pro-name"},[t._v(t._s(s.product.title))])]),a("div",{staticClass:"col-12 col-md-4"},[a("div",{staticClass:"pro_qty"},[t._v("x"+t._s(s.qty))])])])]),a("div",{staticClass:"col-2 p-0"},[s.price?a("div",{staticClass:"pro_price"},[t._v("NT"+t._s(t._f("currency")(s.product.price)))]):a("div",{staticClass:"pro_price"},[t._v("NT"+t._s(t._f("currency")(s.product.origin_price)))])])])])})),a("li",{staticClass:"pt-4"},[a("div",{staticClass:"row summary"},[a("div",{staticClass:"col-6 p-0"},[t._v("共"+t._s(t.cartlength)+"項")]),a("div",{staticClass:"col-2 p-0"},[t._v(t._s(t.$t("Billinginfo.summary")))]),a("div",{staticClass:"col-3 p-0"},[t._v("NT"+t._s(t._f("currency")(t._f("floor")(t.carts.total))))]),a("div",{staticClass:"col-1 p-0"})])])],2),a("div",{staticClass:"my-4 coupon"},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_num,expression:"coupon_num"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠代碼"},domProps:{value:t.coupon_num},on:{input:function(s){s.target.composing||(t.coupon_num=s.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text coupon-send",on:{click:function(s){return s.preventDefault(),t.addCouponCode(s)}}},[t._v(t._s(t.$t("Billinginfo.coupon_sub")))])])]),t.coupon_success?t._e():a("div",[a("p",{staticClass:"text-danger"},[t._v(t._s(t.$t("Billinginfo.coupon_failed")))])])])]),a("div",{staticClass:"col-12 col-md-7"},[a("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(s){var e=s.handleSubmit;return[a("form",{staticClass:"buyer_infos",on:{submit:function(s){return s.preventDefault(),e(t.createOrder)}}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-sm-6"},[a("label",{attrs:{for:"buyer-name"}},[t._v(" "+t._s(t.$t("Billinginfo.form_name"))),a("span",{staticClass:"marker"},[t._v("*")])]),a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,r=s.classes;return[a("div",{class:r},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",attrs:{type:"text",id:"buyer-name",placeholder:"請輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(s){s.target.composing||t.$set(t.form.user,"name",s.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(e[0]))])])]}}],null,!0)})],1),a("div",{staticClass:"form-group col-sm-6"},[a("label",{attrs:{for:"buyer-tel"}},[t._v(" "+t._s(t.$t("Billinginfo.form_tel"))),a("span",{staticClass:"marker"},[t._v("*")])]),a("ValidationProvider",{attrs:{rules:"required|phone"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,r=s.classes;return[a("div",{class:r},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",attrs:{type:"text",id:"buyer-tel",placeholder:"請輸入電話號碼"},domProps:{value:t.form.user.tel},on:{input:function(s){s.target.composing||t.$set(t.form.user,"tel",s.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(e[0]))])])]}}],null,!0)})],1)]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-sm-6"},[a("label",{attrs:{for:"buyer-email"}},[t._v("Email"),a("span",{staticClass:"marker"},[t._v("*")])]),a("ValidationProvider",{attrs:{name:"email",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,r=s.classes;return[a("div",{class:r},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",attrs:{type:"email",name:"email",id:"buyer-email",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(s){s.target.composing||t.$set(t.form.user,"email",s.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(e[0]))])])]}}],null,!0)})],1),a("div",{staticClass:"form-group col-sm-6"},[a("div",[a("label",{attrs:{for:"buyer-pay"}},[t._v(t._s(t.$t("Billinginfo.form_pay")))]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.user.payment,expression:"form.user.payment"}],staticClass:"form-control",attrs:{name:"payment",id:"buyer-pay"},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.$set(t.form.user,"payment",s.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"CVS"}},[t._v(t._s(t.$t("Billinginfo.pay_op1")))]),a("option",{attrs:{value:"CTP"}},[t._v(t._s(t.$t("Billinginfo.pay_op2")))])])])])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"buyeraddress"}},[t._v(t._s(t.$t("Billinginfo.form_adr"))),a("span",{staticClass:"marker"},[t._v("*")])]),a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,r=s.classes;return[a("div",{class:r},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",attrs:{type:"text",name:"address",id:"buyeraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(s){s.target.composing||t.$set(t.form.user,"address",s.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v(t._s(e[0]))])])]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comment"}},[t._v(t._s(t.$t("Billinginfo.form_comment")))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"10",rows:"3",placeholder:"歡迎輸入想對我們說的話"},domProps:{value:t.form.message},on:{input:function(s){s.target.composing||t.$set(t.form,"message",s.target.value)}}})]),a("div",{staticClass:"sub_order"},[a("button",{staticClass:"btn-order",attrs:{type:"submit"}},[t._v(t._s(t.$t("Billinginfo.next_btn")))])])])]}}])})],1)])]),a("div",{staticClass:"modal fade",attrs:{id:"leaveWarn",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("p",[a("i",{staticClass:"fas fa-exclamation-circle"}),t._v(t._s(t.$t("Leavemodal.notice_txt")))])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-stay",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("Leavemodal.cancel")))]),a("button",{staticClass:"btn btn-leave",attrs:{type:"button","data-dismiss":"modal"}},[t._v(t._s(t.$t("Leavemodal.leave")))])])])])])],1)},r=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title text-light",attrs:{id:"exampleModalLabel"}},[t._v("PURE SAVON")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],o=(a("99af"),a("5530")),i=a("2f62"),l=a("1157"),n=a.n(l),c=a("faba"),u=a("ea8a"),d={name:"Billinginfo",data:function(){return{step:2,coupon_num:"",form:{user:{name:"",email:"",tel:"",address:"",payment:"CVS"},message:""},goNext:!1}},components:{Bannerimg:c["a"],ProgressStep:u["a"]},methods:{getCart:function(){this.$store.dispatch("cartModules/getCart")},addCouponCode:function(){this.$store.dispatch("cartModules/addCouponCode",this.coupon_num),this.getCart()},createOrder:function(){var t=this,s=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("exploreu","/order"),e=s.form;s.goNext=!0,this.$store.dispatch("updateLoading",!0),this.$http.post(a,{data:e}).then((function(a){console.log(a.data),a.data.success?(s.$router.push("/checkout/".concat(a.data.orderId)),console.log(a.data.success),localStorage.removeItem("cart"),t.$store.commit("cartModules/CART"),t.$store.dispatch("cartModules/getCartinfo")):(t.$store.dispatch("alertMessageModules/updateMessage",{message:a.data.message,status:"danger"}),s.$router.push("/checkorders")),t.$store.dispatch("updateLoading",!1)}))},removeCart:function(){this.$store.dispatch("cartModules/getCart"),this.$store.dispatch("cartModules/removeCart")}},computed:Object(o["a"])({},Object(i["c"])("cartModules",["carts","cartlength","coupon_success"])),beforeRouteLeave:function(t,s,a){var e=this;e.goNext?a():(n()("#leaveWarn").modal("show"),n()(".btn-stay").on("click",(function(){a(!1)})),n()(".btn-leave").on("click",(function(){e.removeCart(),a()})))},created:function(){this.getCart()}},m=d,p=(a("b9fa"),a("2877")),v=Object(p["a"])(m,e,r,!1,null,"b8423b46",null);s["default"]=v.exports},a6da:function(t,s,a){},b9fa:function(t,s,a){"use strict";a("a6da")},ea8a:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"progressStep"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[a("div",{staticClass:"step",class:{now:1===t.current}},[a("p",[t._v(t._s(t.$t("Progress_step.step1")))])])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"step",class:{now:2===t.current}},[a("p",[t._v(t._s(t.$t("Progress_step.step2")))])])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"step",class:{now:3===t.current}},[a("p",[t._v(t._s(t.$t("Progress_step.step3")))])])])])])},r=[],o={name:"ProgressStep",props:["current"]},i=o,l=a("2877"),n=Object(l["a"])(i,e,r,!1,null,null,null);s["a"]=n.exports},faba:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("div",{staticClass:"container-fluid bannerimg"},[t._t("default")],2)])},r=[],o={name:"Bannerimg"},i=o,l=a("2877"),n=Object(l["a"])(i,e,r,!1,null,null,null);s["a"]=n.exports}}]);
//# sourceMappingURL=chunk-4f3c809a.e217f064.js.map